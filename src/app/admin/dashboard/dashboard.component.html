<!-- ================= DASHBOARD ADMIN ================= -->
<div *ngIf="!loading" class="min-h-screen bg-gray-100 px-8 py-6">

  <!-- ================= HEADER ================= -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-800">
      Dashboard <span class="text-blue-600">Admin</span>
    </h1>
    <p class="text-gray-500">
      Vue globale de <span class="font-semibold text-blue-600">l’activité logistique</span>
    </p>
  </div>

  <!-- ================= STATS PRINCIPALES ================= -->
  <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6 mb-8">

    <div class="bg-white rounded-lg shadow p-6 text-center border-t-4 border-blue-600">
      <p class="text-sm text-gray-500">Commandes totales</p>
      <p class="text-3xl font-bold text-blue-600">{{ totalOrders }}</p>
    </div>

    <div class="bg-white rounded-lg shadow p-6 text-center border-t-4 border-yellow-500">
      <p class="text-sm text-gray-500">Commandes à livrer</p>
      <p class="text-3xl font-bold text-yellow-600">{{ pendingOrders }}</p>
    </div>

    <div class="bg-white rounded-lg shadow p-6 text-center border-t-4 border-green-600">
      <p class="text-sm text-gray-500">Livraisons réussies</p>
      <p class="text-3xl font-bold text-green-600">{{ successfulDeliveries }}</p>
    </div>

    <div class="bg-white rounded-lg shadow p-6 text-center border-t-4 border-red-600">
      <p class="text-sm text-gray-500">Livraisons échouées</p>
      <p class="text-3xl font-bold text-red-600">{{ failedDeliveries }}</p>
    </div>

  </div>

  <!-- ================= SÉLECTEUR (CENTRÉ) ================= -->
  <div class="flex justify-center mb-6">
    <div class="btn-group">
      <button
        type="button"
        class="btn"
        [ngClass]="period === 'week' ? 'btn-primary' : 'btn-outline-primary'"
        (click)="changePeriod('week')">
        Semaine
      </button>

      <button
        type="button"
        class="btn"
        [ngClass]="period === 'month' ? 'btn-primary' : 'btn-outline-primary'"
        (click)="changePeriod('month')">
        Mois
      </button>
    </div>
  </div>

  <!-- ================= GRAPHIQUE ================= -->
  <div class="bg-white rounded-lg shadow p-6 mb-8">

    <h3 class="text-xl font-semibold text-gray-800 mb-4 text-center">
      Activité <span class="text-blue-600">logistique</span>
    </h3>

    <div class="h-[320px]">
      <canvas #activityChart></canvas>
    </div>

  </div>

  <!-- ================= TAUX DE RÉUSSITE (CENTRÉ) ================= -->
  <div class="flex justify-center mb-8">
    <div class="bg-white rounded-lg shadow p-6 w-full max-w-sm text-center">
      <p class="text-gray-500 mb-2">Taux de réussite</p>
      <p class="text-5xl font-bold text-blue-600">
        {{ successRate }}%
      </p>
    </div>
  </div>

  <!-- ================= STATS SECONDAIRES ================= -->
  <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6">

    <div class="bg-white rounded-lg shadow p-4 text-center">
      <p class="text-sm text-gray-500">Livreurs actifs</p>
      <p class="text-2xl font-bold text-gray-800">{{ activeCouriers }}</p>
    </div>

    <div class="bg-white rounded-lg shadow p-4 text-center">
      <p class="text-sm text-gray-500">Livraisons en cours</p>
      <p class="text-2xl font-bold text-gray-800">{{ ongoingDeliveries }}</p>
    </div>

    <div class="bg-white rounded-lg shadow p-4 text-center">
      <p class="text-sm text-gray-500">Commandes annulées</p>
      <p class="text-2xl font-bold text-red-600">{{ cancelledOrders }}</p>
    </div>

    <div class="bg-white rounded-lg shadow p-4 text-center">
      <p class="text-sm text-gray-500">Total aujourd’hui</p>
      <p class="text-2xl font-bold text-blue-600">{{ todayTotal }}</p>
    </div>

  </div>

</div>

<!-- ================= CHARGEMENT ================= -->
<div *ngIf="loading" class="text-center py-10 text-gray-500">
  Chargement des données…
</div>
